import{p as a,e,d as s,i as l,o as d,c as o,a as r,u,w as m,k as n,b as t,s as i,r as p,m as c,T as v,V as g,g as f,F as w,l as V,W as h,B as _,X as I,_ as j,j as b,q as C}from"./index.ea109c08.js";import{k as x,l as U,b as k,c as N,_ as y}from"./hooks.2e90c371.js";import{_ as S,a as q,b as A}from"./SendAuthCode.a8b19074.js";const B=m();a("data-v-9d5a5ad8");const F={class:"wrap"},P=n("我们需要验证你的邮箱");e();var T=s({expose:[],setup(a){const e=l("userId"),s=l("email"),m=i(1),n=()=>{m((null==e?void 0:e.value)||"",(null==s?void 0:s.value)||"")},p=l("push"),c=l("register"),v=async a=>{const e=await c(a);e&&e.error_code===t.Success&&p()};return(a,e)=>(d(),o("div",F,[r(S,{address:u(s),request:n,confirm:v},{header:B((()=>[P])),_:1},8,["address"])]))}});T.__scopeId="data-v-9d5a5ad8";var W=s({expose:[],setup(a){const e=[T,A],s=p(null),{expose:l}=c();return l({reset:()=>{s.value.reset()}}),(a,l)=>(d(),o(q,{ref:s,stack:e},null,512))}});W.__scopeId="data-v-6e0d9d28";const X=m();a("data-v-0806278c");const z={class:"register"},D={class:"row"},E={class:"input"},G={class:"row"},H={class:"input"},J={class:"row"},K={class:"input"},L={class:"row"},M={class:"input"},O={class:"row"},Q={class:"input"},R={class:"row"},Y={class:"input"},Z=n("注册");e();var $=s({expose:[],setup(a){const e=v({userId:"",userName:"",password:"",passwordConfirm:"",email:"",major:""}),[s,l]=x(g(e,"email")),[m,n]=U(g(e,"userId")),[t,i]=k(g(e,"userName")),[c,S]=k(g(e,"major")),[q,A]=k(g(e,"password")),[B,F]=N(g(e,"password"))(g(e,"passwordConfirm")),P=p([s,m,t,c,q,B]),T=f((()=>{let a=0;for(;a<P.value.length;){if(P.value[a].value!==w.Success)return!1;a++}return!0})),$=p(null),aa=()=>{$.value.open()},ea=p(null),sa=()=>{ea.value&&ea.value.reset()};return V("close",(()=>{$.value.close()})),V("register",(a=>T.value?h(e.userId,e.userName,e.password,e.email,e.major,a):(_({message:"请检查信息是否全部无误填写完毕"}),Promise.resolve(null)))),V("userId",g(e,"userId")),V("email",g(e,"email")),I(),(a,p)=>(d(),o("div",z,[r("div",D,[r("div",E,[r(u(j),{modelValue:u(e).userId,"onUpdate:modelValue":p[1]||(p[1]=a=>u(e).userId=a),placeholder:"学号"},null,8,["modelValue"])]),r(y,{flag:u(m),msg:u(n)},null,8,["flag","msg"])]),r("div",G,[r("div",H,[r(u(j),{modelValue:u(e).userName,"onUpdate:modelValue":p[2]||(p[2]=a=>u(e).userName=a),placeholder:"姓名"},null,8,["modelValue"])]),r(y,{flag:u(t),msg:u(i)},null,8,["flag","msg"])]),r("div",J,[r("div",K,[r(u(j),{modelValue:u(e).major,"onUpdate:modelValue":p[3]||(p[3]=a=>u(e).major=a),placeholder:"专业"},null,8,["modelValue"])]),r(y,{flag:u(c),msg:u(S)},null,8,["flag","msg"])]),r("div",L,[r("div",M,[r(u(j),{type:"password",modelValue:u(e).password,"onUpdate:modelValue":p[4]||(p[4]=a=>u(e).password=a),placeholder:"密码"},null,8,["modelValue"])]),r(y,{flag:u(q),msg:u(A)},null,8,["flag","msg"])]),r("div",O,[r("div",Q,[r(u(j),{type:"password",modelValue:u(e).passwordConfirm,"onUpdate:modelValue":p[5]||(p[5]=a=>u(e).passwordConfirm=a),placeholder:"确认密码"},null,8,["modelValue"])]),r(y,{flag:u(B),msg:u(F)},null,8,["flag","msg"])]),r("div",R,[r("div",Y,[r(u(j),{modelValue:u(e).email,"onUpdate:modelValue":p[6]||(p[6]=a=>u(e).email=a),placeholder:"邮箱"},null,8,["modelValue"])]),r(y,{msg:u(l),flag:u(s)},null,8,["msg","flag"])]),r(u(b),{class:"btn",onClick:aa,disabled:!u(T)},{default:X((()=>[Z])),_:1},8,["disabled"]),r(C,{ref:$,width:"80%",height:"80%",onClose:sa},{default:X((()=>[r(W,{ref:ea},null,512)])),_:1},512)]))}});$.__scopeId="data-v-0806278c";export default $;
