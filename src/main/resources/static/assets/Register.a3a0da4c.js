import{p as a,e as s,d as e,i as l,o as d,c as o,a as r,u,w as m,k as n,b as t,s as i,r as p,m as c,T as v,V as g,g as f,F as w,l as V,W as h,B as _,X as I,_ as j,j as C,q as b}from"./index.743625ef.js";import{k as x,l as U,b as k,c as N,_ as y}from"./hooks.6d23fddd.js";import{_ as S,a as q,b as A}from"./SendAuthCode.090ad5a8.js";const B=m();a("data-v-9d5a5ad8");const F={class:"wrap"},P=n("我们需要验证你的邮箱");s();var T=e({expose:[],setup(a){const s=l("userId"),e=l("email"),m=i(1),n=()=>{m((null==s?void 0:s.value)||"",(null==e?void 0:e.value)||"")},p=l("push"),c=l("register"),v=async a=>{const s=await c(a);s&&s.error_code===t.Success&&p()};return(a,s)=>(d(),o("div",F,[r(S,{address:u(e),request:n,confirm:v},{header:B((()=>[P])),_:1},8,["address"])]))}});T.__scopeId="data-v-9d5a5ad8";var W=e({expose:[],setup(a){const s=[T,A],e=p(null),{expose:l}=c();return l({reset:()=>{e.value.reset()}}),(a,l)=>(d(),o(q,{ref:e,stack:s},null,512))}});W.__scopeId="data-v-6e0d9d28";const X=m();a("data-v-0806278c");const z={class:"register"},D={class:"row"},E={class:"input"},G={class:"row"},H={class:"input"},J={class:"row"},K={class:"input"},L={class:"row"},M={class:"input"},O={class:"row"},Q={class:"input"},R={class:"row"},Y={class:"input"},Z=n("注册");s();var $=e({expose:[],setup(a){const s=v({userId:"",userName:"",password:"",passwordConfirm:"",email:"",major:""}),[e,l]=x(g(s,"email")),[m,n]=U(g(s,"userId")),[t,i]=k(g(s,"userName")),[c,S]=k(g(s,"major")),[q,A]=k(g(s,"password")),[B,F]=N(g(s,"password"))(g(s,"passwordConfirm")),P=p([e,m,t,c,q,B]),T=f((()=>{let a=0;for(;a<P.value.length;){if(P.value[a].value!==w.Success)return!1;a++}return!0})),$=p(null),aa=()=>{$.value.open()},sa=p(null),ea=()=>{sa.value&&sa.value.reset()};return V("close",(()=>{$.value.close()})),V("register",(a=>T.value?h(s.userId,s.userName,s.password,s.email,s.major,a):(_({message:"请检查信息是否全部无误填写完毕"}),Promise.resolve(null)))),V("userId",g(s,"userId")),V("email",g(s,"email")),I(),(a,p)=>(d(),o("div",z,[r("div",D,[r("div",E,[r(u(j),{modelValue:u(s).userId,"onUpdate:modelValue":p[1]||(p[1]=a=>u(s).userId=a),placeholder:"学号"},null,8,["modelValue"])]),r(y,{flag:u(m),msg:u(n)},null,8,["flag","msg"])]),r("div",G,[r("div",H,[r(u(j),{modelValue:u(s).userName,"onUpdate:modelValue":p[2]||(p[2]=a=>u(s).userName=a),placeholder:"姓名"},null,8,["modelValue"])]),r(y,{flag:u(t),msg:u(i)},null,8,["flag","msg"])]),r("div",J,[r("div",K,[r(u(j),{modelValue:u(s).major,"onUpdate:modelValue":p[3]||(p[3]=a=>u(s).major=a),placeholder:"专业"},null,8,["modelValue"])]),r(y,{flag:u(c),msg:u(S)},null,8,["flag","msg"])]),r("div",L,[r("div",M,[r(u(j),{type:"password",modelValue:u(s).password,"onUpdate:modelValue":p[4]||(p[4]=a=>u(s).password=a),placeholder:"密码"},null,8,["modelValue"])]),r(y,{flag:u(q),msg:u(A)},null,8,["flag","msg"])]),r("div",O,[r("div",Q,[r(u(j),{type:"password",modelValue:u(s).passwordConfirm,"onUpdate:modelValue":p[5]||(p[5]=a=>u(s).passwordConfirm=a),placeholder:"确认密码"},null,8,["modelValue"])]),r(y,{flag:u(B),msg:u(F)},null,8,["flag","msg"])]),r("div",R,[r("div",Y,[r(u(j),{modelValue:u(s).email,"onUpdate:modelValue":p[6]||(p[6]=a=>u(s).email=a),placeholder:"邮箱"},null,8,["modelValue"])]),r(y,{msg:u(l),flag:u(e)},null,8,["msg","flag"])]),r(u(C),{class:"btn",onClick:aa,disabled:!u(T)},{default:X((()=>[Z])),_:1},8,["disabled"]),r(b,{ref:$,width:"80%",height:"80%",onClose:ea},{default:X((()=>[r(W,{ref:sa},null,512)])),_:1},512)]))}});$.__scopeId="data-v-0806278c";export default $;
