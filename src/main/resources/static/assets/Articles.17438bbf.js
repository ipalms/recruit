import{d as a,r as e,m as s,y as t,w as l,n as i,e as r,F as u,g as o,q as n,k as c,E as d,x as v,s as m,K as p,p as f,i as g,I as y,j as k,_ as S,z as b}from"./vendor.695cdb15.js";import{F as w,b as C,u as I,R as N,a as P,v as _}from"./index.062403ca.js";import{a as h,b as x,c as F,d as q}from"./article.07fbf1ee.js";import{_ as j,a as E}from"./Fatal.e8846fc8.js";const L=v();f("data-v-4d513a13");const z={class:"article"},B={class:"list"},K={class:"article-avatar"},M={class:"article-info"},R={class:"name"},A={class:"footer flex"},D={class:"p"},G=o("span",{class:"icon-thumb-up iconfont"},null,-1),H=o("span",{class:"p"},[o("span",{class:"icon-shoucang iconfont"})],-1),J={class:"pagination flex jc ac"},O=m("prev"),Q={class:"cur-page"},T=m("next");g();var U=a({expose:[],props:{currentPage:{type:Number,required:!1},rows:{type:Number,required:!1},courseName:{type:[String,null],required:!1},adminName:{type:[String,null],required:!1},myFavorites:{type:Boolean,required:!1}},setup(a){const v=a,f=I(),g=y(),U=e(w.Normal),V=e({total:0,totalPage:0,rows:10,currentPage:1,items:[]}),W=e(v.currentPage||1);s(v,(()=>{W.value=1}));const X=async()=>{U.value=w.Pending;const a=v.myFavorites?await h(f.state.user.userInfo.userId,W.value,v.rows||N):await x(W.value,v.rows||N,f.state.user.userInfo.userId,v.courseName||null,v.adminName||null);a.error_code===P.Success?(v.myFavorites&&a.data.items.forEach((a=>a.favoriteStatus=1)),V.value=a.data,U.value=w.Success):U.value=w.Fail};t((()=>{X()}));const Y=()=>{W.value+1<=V.value.total&&(W.value+=1,X())},Z=()=>{W.value-1>=1&&(W.value-=1,X())};return(a,e)=>{const s=p("loading");return l((k(),r("div",z,[V.value.items.length?(k(),r(u,{key:0},[l(o("ul",B,[(k(!0),r(u,null,n(V.value.items,((a,e)=>(k(),r("li",{class:"flex",key:a.id},[o("div",K,[o(i(S),{class:"ava",fit:"cover",src:a.image,alt:a.adminName},null,8,["src","alt"])]),o("div",M,[o("div",R,[o("span",null,c(a.adminName),1),o(_,{"course-name":a.courseName},null,8,["course-name"])]),o("div",{class:"title p",onClick:e=>{return s=a.id,void g.push({path:"/article",query:{id:s}});var s}},c(a.title),9,["onClick"]),o("div",A,[o("div",{onClick:s=>(async(a,e)=>{f.state.user.isLogin?(await q(f.state.user.userInfo.userId,e)).error_code===P.Success&&(V.value.items[a].likeCount+=(V.value.items[a].likeStatus^=1)?1:-1):b({message:"请先登陆"})})(e,a.id),class:["footer-icon",{active:a.likeStatus}]},[o("span",D,[G,m(" "+c(a.likeCount),1)])],10,["onClick"]),o("div",{onClick:s=>(async(a,e)=>{f.state.user.isLogin?(await F(f.state.user.userInfo.userId,e)).error_code===P.Success&&(V.value.items[a].favoriteStatus^=1):b({message:"请先登陆"})})(e,a.id),class:["footer-icon",{active:a.favoriteStatus}]},[H],10,["onClick"])])])])))),128))],512),[[s,U.value===i(w).Pending]]),o("div",J,[o(i(C),{disabled:W.value<=1,onClick:Z},{default:L((()=>[O])),_:1},8,["disabled"]),o("div",Q,c(Math.min(V.value.totalPage,W.value))+" / "+c(V.value.totalPage),1),o(i(C),{disabled:W.value>=V.value.totalPage,onClick:Y},{default:L((()=>[T])),_:1},8,["disabled"])])],64)):U.value===i(w).Fail?(k(),r(j,{key:1,style:{width:"50%",margin:"0 auto"}})):U.value===i(w).Success?(k(),r(E,{key:2,style:{width:"50%",margin:"0 auto"}})):d("",!0)],512)),[[s,U.value===i(w).Pending]])}}});U.__scopeId="data-v-4d513a13";export{U as _};
