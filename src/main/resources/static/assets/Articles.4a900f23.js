import{d as a,r as e,m as s,y as t,w as l,n as i,e as r,F as u,g as o,q as n,k as c,E as d,x as v,s as m,J as p,p as f,i as g,L as y,j as k,_ as S,z as w}from"./vendor.b6c71576.js";import{F as b,b as C,u as N,R as P,a as _,v as h}from"./index.0564e520.js";import{a as I,b as x,c as F,d as q}from"./article.02fe1419.js";import{_ as j,a as L}from"./Fatal.f019e01c.js";const E=v();f("data-v-4d513a13");const z={class:"article"},B={class:"list"},J={class:"article-avatar"},M={class:"article-info"},R={class:"name"},A={class:"footer flex"},D={class:"p"},G=o("span",{class:"icon-thumb-up iconfont"},null,-1),H=o("span",{class:"p"},[o("span",{class:"icon-shoucang iconfont"})],-1),K={class:"pagination flex jc ac"},O=m("prev"),Q={class:"cur-page"},T=m("next");g();var U=a({expose:[],props:{currentPage:{type:Number,required:!1},rows:{type:Number,required:!1},courseName:{type:[String,null],required:!1},adminName:{type:[String,null],required:!1},myFavorites:{type:Boolean,required:!1}},setup(a){const v=a,f=N(),g=y(),U=e(b.Normal),V=e({total:0,totalPage:0,rows:10,currentPage:1,items:[]}),W=e(v.currentPage||1);s(v,(()=>{W.value=1}));const X=async()=>{U.value=b.Pending;const a=v.myFavorites?await I(f.state.user.userInfo.userId,W.value,v.rows||P):await x(W.value,v.rows||P,f.state.user.userInfo.userId,v.courseName||null,v.adminName||null);a.error_code===_.Success?(v.myFavorites&&a.data.items.forEach((a=>a.favoriteStatus=1)),V.value=a.data,U.value=b.Success):U.value=b.Fail};t((()=>{X()}));const Y=()=>{W.value+1<=V.value.total&&(W.value+=1,X())},Z=()=>{W.value-1>=1&&(W.value-=1,X())};return(a,e)=>{const s=p("loading");return l((k(),r("div",z,[V.value.items.length?(k(),r(u,{key:0},[l(o("ul",B,[(k(!0),r(u,null,n(V.value.items,((a,e)=>(k(),r("li",{class:"flex",key:a.id},[o("div",J,[o(i(S),{class:"ava",fit:"cover",src:a.image,alt:a.adminName},null,8,["src","alt"])]),o("div",M,[o("div",R,[o("span",null,c(a.adminName),1),o(h,{"course-name":a.courseName},null,8,["course-name"])]),o("div",{class:"title p",onClick:e=>{return s=a.id,void g.push({path:"/article",query:{id:s}});var s}},c(a.title),9,["onClick"]),o("div",A,[o("div",{onClick:s=>(async(a,e)=>{f.state.user.isLogin?(await q(f.state.user.userInfo.userId,e)).error_code===_.Success&&(V.value.items[a].likeCount+=(V.value.items[a].likeStatus^=1)?1:-1):w({message:"请先登陆"})})(e,a.id),class:["footer-icon",{active:a.likeStatus}]},[o("span",D,[G,m(" "+c(a.likeCount),1)])],10,["onClick"]),o("div",{onClick:s=>(async(a,e)=>{f.state.user.isLogin?(await F(f.state.user.userInfo.userId,e)).error_code===_.Success&&(V.value.items[a].favoriteStatus^=1):w({message:"请先登陆"})})(e,a.id),class:["footer-icon",{active:a.favoriteStatus}]},[H],10,["onClick"])])])])))),128))],512),[[s,U.value===i(b).Pending]]),o("div",K,[o(i(C),{disabled:W.value<=1,onClick:Z},{default:E((()=>[O])),_:1},8,["disabled"]),o("div",Q,c(Math.min(V.value.totalPage,W.value))+" / "+c(V.value.totalPage),1),o(i(C),{disabled:W.value>=V.value.totalPage,onClick:Y},{default:E((()=>[T])),_:1},8,["disabled"])])],64)):U.value===i(b).Fail?(k(),r(j,{key:1,style:{width:"50%",margin:"0 auto"}})):U.value===i(b).Success?(k(),r(L,{key:2,style:{width:"50%",margin:"0 auto"}})):d("",!0)],512)),[[s,U.value===i(b).Pending]])}}});U.__scopeId="data-v-4d513a13";export{U as _};
