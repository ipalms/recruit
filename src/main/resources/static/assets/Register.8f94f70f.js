import{p as a,i as s,d as e,a5 as l,j as d,e as o,g as r,n as u,x as m,s as n,r as t,A as i,ak as p,al as c,B as v,a7 as g,z as f}from"./vendor.695cdb15.js";import{a as w,s as V,F as h,r as _,l as I,_ as j,b,c as x}from"./index.529d0d2c.js";import{d as C,e as U,b as N,c as k,_ as y}from"./hooks.d75ed36a.js";import{_ as S,a as A,b as q}from"./SendAuthCode.96468940.js";const z=m();a("data-v-9d5a5ad8");const B={class:"wrap"},F=n("我们需要验证你的邮箱");s();var P=e({expose:[],setup(a){const s=l("userId"),e=l("email"),m=V(1),n=()=>{m((null==s?void 0:s.value)||"",(null==e?void 0:e.value)||"")},t=l("push"),i=l("register"),p=async a=>{const s=await i(a);s&&s.error_code===w.Success&&t()};return(a,s)=>(d(),o("div",B,[r(S,{address:u(e),request:n,confirm:p},{header:z((()=>[F])),_:1},8,["address"])]))}});P.__scopeId="data-v-9d5a5ad8";var D=e({expose:[],setup(a){const s=[P,q],e=t(null),{expose:l}=i();return l({reset:()=>{e.value.reset()}}),(a,l)=>(d(),o(A,{ref:e,stack:s},null,512))}});D.__scopeId="data-v-56f0e2cd";const E=m();a("data-v-0806278c");const G={class:"register"},H={class:"row"},J={class:"input"},K={class:"row"},L={class:"input"},M={class:"row"},O={class:"input"},Q={class:"row"},R={class:"input"},T={class:"row"},W={class:"input"},X={class:"row"},Y={class:"input"},Z=n("注册");s();var $=e({expose:[],setup(a){const s=p({userId:"",userName:"",password:"",passwordConfirm:"",email:"",major:""}),[e,l]=C(c(s,"email")),[m,n]=U(c(s,"userId")),[i,w]=N(c(s,"userName")),[V,S]=N(c(s,"major")),[A,q]=N(c(s,"password")),[z,B]=k(c(s,"password"))(c(s,"passwordConfirm")),F=t([e,m,i,V,A,z]),P=v((()=>{let a=0;for(;a<F.value.length;){if(F.value[a].value!==h.Success)return!1;a++}return!0})),$=t(null),aa=()=>{$.value.open()},sa=t(null),ea=()=>{sa.value&&sa.value.reset()};return g("close",(()=>{$.value.close()})),g("register",(a=>P.value?_(s.userId,s.userName,s.password,s.email,s.major,a):(f({message:"请检查信息是否全部无误填写完毕"}),Promise.resolve(null)))),g("userId",c(s,"userId")),g("email",c(s,"email")),I(),(a,t)=>(d(),o("div",G,[r("div",H,[r("div",J,[r(u(j),{modelValue:u(s).userId,"onUpdate:modelValue":t[1]||(t[1]=a=>u(s).userId=a),placeholder:"学号"},null,8,["modelValue"])]),r(y,{flag:u(m),msg:u(n)},null,8,["flag","msg"])]),r("div",K,[r("div",L,[r(u(j),{modelValue:u(s).userName,"onUpdate:modelValue":t[2]||(t[2]=a=>u(s).userName=a),placeholder:"姓名"},null,8,["modelValue"])]),r(y,{flag:u(i),msg:u(w)},null,8,["flag","msg"])]),r("div",M,[r("div",O,[r(u(j),{modelValue:u(s).major,"onUpdate:modelValue":t[3]||(t[3]=a=>u(s).major=a),placeholder:"专业"},null,8,["modelValue"])]),r(y,{flag:u(V),msg:u(S)},null,8,["flag","msg"])]),r("div",Q,[r("div",R,[r(u(j),{type:"password",modelValue:u(s).password,"onUpdate:modelValue":t[4]||(t[4]=a=>u(s).password=a),placeholder:"密码"},null,8,["modelValue"])]),r(y,{flag:u(A),msg:u(q)},null,8,["flag","msg"])]),r("div",T,[r("div",W,[r(u(j),{type:"password",modelValue:u(s).passwordConfirm,"onUpdate:modelValue":t[5]||(t[5]=a=>u(s).passwordConfirm=a),placeholder:"确认密码"},null,8,["modelValue"])]),r(y,{flag:u(z),msg:u(B)},null,8,["flag","msg"])]),r("div",X,[r("div",Y,[r(u(j),{modelValue:u(s).email,"onUpdate:modelValue":t[6]||(t[6]=a=>u(s).email=a),placeholder:"邮箱"},null,8,["modelValue"])]),r(y,{msg:u(l),flag:u(e)},null,8,["msg","flag"])]),r(u(b),{class:"btn",onClick:aa,disabled:!u(P)},{default:E((()=>[Z])),_:1},8,["disabled"]),r(x,{ref:$,width:"80%",height:"80%",onClose:ea},{default:E((()=>[r(D,{ref:sa},null,512)])),_:1},512)]))}});$.__scopeId="data-v-0806278c";export default $;
