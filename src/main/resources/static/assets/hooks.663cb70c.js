import{a9 as t,aa as e,ab as n,ac as i,ad as r,ae as s,af as o,ag as a,ah as c,ai as u,d as l,B as p,j as h,e as d,w as f,v as b,n as v,g as y,k as _,p as m,s as x,i as S,r as g,m as w,aj as N,b as C,y as j}from"./vendor.b6c71576.js";import{F as V,e as k,a as F,g as B,h as E,i as O,N as P,U as T}from"./index.0564e520.js";var D=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new U(t,this.dueTime,this.scheduler))},t}(),U=function(t){function n(e,n,i){var r=t.call(this,e)||this;return r.dueTime=n,r.scheduler=i,r.debouncedSubscription=null,r.lastValue=null,r.hasValue=!1,r}return e(n,t),n.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(q,this.dueTime,this))},n.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},n.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},n.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},n}(n);function q(t){t.debouncedNext()}var H=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new I(t,this.predicate))},t}(),I=function(t){function n(e,n){var i=t.call(this,e)||this;return i.predicate=n,i.skipping=!0,i.index=0,i}return e(n,t),n.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},n.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(n){this.destination.error(n)}},n}(n);function z(t,e){return"function"==typeof e?function(n){return n.pipe(z((function(n,s){return i(t(n,s)).pipe(r((function(t,i){return e(n,t,s,i)})))})))}:function(e){return e.lift(new A(t))}}var A=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new G(t,this.project))},t}(),G=function(t){function n(e,n){var i=t.call(this,e)||this;return i.project=n,i.index=0,i}return e(n,t),n.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e)},n.prototype._innerSub=function(t){var e=this.innerSubscription;e&&e.unsubscribe();var n=new s(this),i=this.destination;i.add(n),this.innerSubscription=o(t,n),this.innerSubscription!==n&&i.add(this.innerSubscription)},n.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},n.prototype._unsubscribe=function(){this.innerSubscription=void 0},n.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},n.prototype.notifyNext=function(t){this.destination.next(t)},n}(a);function J(t,e,n){return function(i){return i.lift(new K(t,e,n))}}var K=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new L(t,this.nextOrObserver,this.error,this.complete))},t}(),L=function(t){function n(e,n,i,r){var s=t.call(this,e)||this;return s._tapNext=c,s._tapError=c,s._tapComplete=c,s._tapError=i||c,s._tapComplete=r||c,u(n)?(s._context=s,s._tapNext=n):n&&(s._context=n,s._tapNext=n.next||c,s._tapError=n.error||c,s._tapComplete=n.complete||c),s}return e(n,t),n.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)},n.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.error(t)},n.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},n}(n);m("data-v-bcddd55a");const M={class:"check-msg"},Q={class:"el-icon-loading"},R={class:"el-icon-circle-check"},W=x("   ");S();var X=l({expose:[],props:{msg:{type:String,required:!0},flag:{type:null,required:!0}},setup(t){const e=t,n=p((()=>e.flag===V.Success)),i=p((()=>e.flag===V.Pending)),r=p((()=>e.flag===V.Fail));return(e,s)=>(h(),d("div",M,[f(y("i",Q,null,512),[[b,v(i)]]),f(y("i",R,null,512),[[b,v(n)]]),f(y("span",null,_(t.msg),513),[[b,v(r)]]),W]))}});X.__scopeId="data-v-bcddd55a";const Y=E(O),Z=E(P),$=E(T),tt=(e,n={debounce:500})=>i=>{const r=g(V.Normal),s=g(""),o=new N,a=o.pipe((l=t=>!t,function(t){return t.lift(new H(l))}),(c=n.debounce,void 0===u&&(u=t),function(t){return t.lift(new D(c,u))}),J((()=>{r.value=V.Pending,s.value=""})),z((async t=>await e(t)))).subscribe((([t,e])=>{t?(r.value=V.Success,s.value=e):(r.value=V.Fail,s.value=e)}));var c,u,l;return C((()=>{a.unsubscribe()})),j((()=>{o.next(i.value)})),[r,s]},et=tt((t=>[$(t),"学号长度不少于5位"])),nt=tt((t=>[Z(t),"输入不能为空"])),it=tt((async t=>{if(!$(t))return[!1,"学号长度10位"];const e=await k(t);switch(e.error_code){case F.Success:return[!0,""];case F.Connect_Fail:return[!1,"网络连接失败"];case F.HasBeenUsed:return[!1,e.message];default:return[!1,"未知错误"]}})),rt=tt((t=>Y(t)?[!0,""]:[!1,"邮箱格式错误"])),st=tt((async t=>{if(!Y(t))return[!1,"邮箱格式错误"];const e=await B(t);switch(e.error_code){case F.HasBeenUsed:return[!1,e.message];case F.Connect_Fail:return[!1,"网络连接失败"];case F.Success:return[!0,""];default:return[!1,"未知错误"]}})),ot=t=>e=>{const n=g(V.Normal),i=g("密码和之前密码不一致");return w([t,e],(([t,e])=>{n.value=t===e?V.Success:V.Fail,i.value=n.value===V.Success?"":"密码和之前密码不一致"})),[n,i]};export{X as _,et as a,nt as b,ot as c,st as d,it as e,J as t,rt as u};
